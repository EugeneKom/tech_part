{"ast":null,"code":"import _toConsumableArray from\"G:/Yevhen/GoIT/react_hw/tech_part/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"G:/Yevhen/GoIT/react_hw/tech_part/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link}from\"react-router-dom\";import UserCard from\"../components/UserCard/UserCard\";import LoadMoreBtn from\"../components/LoadMoreBtn/LoadMoreBtn\";import{useCallback,useEffect,useState}from\"react\";import localStorageCustom from\"../utils/storage\";import{getTweets}from\"../api/fetchUser\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cards=function Cards(){var _useState=useState(function(){return localStorageCustom.load(\"pageCount\")||1;}),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(function(){var savedCards=localStorageCustom.load(\"tweets\");return savedCards||[];}),_useState4=_slicedToArray(_useState3,2),cards=_useState4[0],setCards=_useState4[1];var loadMoreCards=useCallback(function(currentPage){getTweets(currentPage).then(function(data){setPage(function(prev){return prev+1;});localStorageCustom.save(\"pageCount\",currentPage+1);setCards(function(prevCards){return[].concat(_toConsumableArray(prevCards),_toConsumableArray(data));});}).catch(function(error){return console.error(error);});},[setPage,setCards]);useEffect(function(){if(cards.length===0&&page===1){loadMoreCards(page);}},[cards.length,loadMoreCards,page]);var incrementPage=function incrementPage(){loadMoreCards(page);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cards\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(UserCard,{page:page,cards:cards})}),/*#__PURE__*/_jsx(LoadMoreBtn,{cards:cards,incrementPage:incrementPage}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"to home page\"})]});};export default Cards;","map":{"version":3,"names":["Link","UserCard","LoadMoreBtn","useCallback","useEffect","useState","localStorageCustom","getTweets","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Cards","_useState","load","_useState2","_slicedToArray","page","setPage","_useState3","savedCards","_useState4","cards","setCards","loadMoreCards","currentPage","then","data","prev","save","prevCards","concat","_toConsumableArray","catch","error","console","length","incrementPage","children","to"],"sources":["G:/Yevhen/GoIT/react_hw/tech_part/src/Pages/Cards.jsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport UserCard from \"../components/UserCard/UserCard\";\r\nimport LoadMoreBtn from \"../components/LoadMoreBtn/LoadMoreBtn\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport localStorageCustom from \"../utils/storage\";\r\nimport { getTweets } from \"../api/fetchUser\";\r\n\r\nconst Cards = () => {\r\n  const [page, setPage] = useState(() => {\r\n    return localStorageCustom.load(\"pageCount\") || 1;\r\n  });\r\n  const [cards, setCards] = useState(() => {\r\n    const savedCards = localStorageCustom.load(\"tweets\");\r\n    return savedCards || [];\r\n  });\r\n\r\n  const loadMoreCards = useCallback(\r\n    (currentPage) => {\r\n      getTweets(currentPage)\r\n        .then((data) => {\r\n          setPage((prev) => prev + 1);\r\n          localStorageCustom.save(\"pageCount\", currentPage + 1);\r\n          setCards((prevCards) => {\r\n            return [...prevCards, ...data];\r\n          });\r\n        })\r\n        .catch((error) => console.error(error));\r\n    },\r\n    [setPage, setCards]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (cards.length === 0 && page === 1) {\r\n      loadMoreCards(page);\r\n    }\r\n  }, [cards.length, loadMoreCards, page]);\r\n\r\n  const incrementPage = () => {\r\n    loadMoreCards(page);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h2>Cards</h2>\r\n      <div>\r\n        <UserCard page={page} cards={cards} />\r\n      </div>\r\n      <LoadMoreBtn cards={cards} incrementPage={incrementPage} />\r\n      <Link to=\"/\">to home page</Link>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cards;\r\n"],"mappings":"sPAAA,OAASA,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,QAAQ,KAAM,iCAAiC,CACtD,MAAO,CAAAC,WAAW,KAAM,uCAAuC,CAC/D,OAASC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACxD,MAAO,CAAAC,kBAAkB,KAAM,kBAAkB,CACjD,OAASC,SAAS,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7C,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClB,IAAAC,SAAA,CAAwBV,QAAQ,CAAC,UAAM,CACrC,MAAO,CAAAC,kBAAkB,CAACU,IAAI,CAAC,WAAW,CAAC,EAAI,CAAC,CAClD,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAFKI,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAGpB,IAAAI,UAAA,CAA0BhB,QAAQ,CAAC,UAAM,CACvC,GAAM,CAAAiB,UAAU,CAAGhB,kBAAkB,CAACU,IAAI,CAAC,QAAQ,CAAC,CACpD,MAAO,CAAAM,UAAU,EAAI,EAAE,CACzB,CAAC,CAAC,CAAAC,UAAA,CAAAL,cAAA,CAAAG,UAAA,IAHKG,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAKtB,GAAM,CAAAG,aAAa,CAAGvB,WAAW,CAC/B,SAACwB,WAAW,CAAK,CACfpB,SAAS,CAACoB,WAAW,CAAC,CACnBC,IAAI,CAAC,SAACC,IAAI,CAAK,CACdT,OAAO,CAAC,SAACU,IAAI,QAAK,CAAAA,IAAI,CAAG,CAAC,GAAC,CAC3BxB,kBAAkB,CAACyB,IAAI,CAAC,WAAW,CAAEJ,WAAW,CAAG,CAAC,CAAC,CACrDF,QAAQ,CAAC,SAACO,SAAS,CAAK,CACtB,SAAAC,MAAA,CAAAC,kBAAA,CAAWF,SAAS,EAAAE,kBAAA,CAAKL,IAAI,GAC/B,CAAC,CAAC,CACJ,CAAC,CAAC,CACDM,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,GAAC,CAC3C,CAAC,CACD,CAAChB,OAAO,CAAEK,QAAQ,CACpB,CAAC,CAEDrB,SAAS,CAAC,UAAM,CACd,GAAIoB,KAAK,CAACc,MAAM,GAAK,CAAC,EAAInB,IAAI,GAAK,CAAC,CAAE,CACpCO,aAAa,CAACP,IAAI,CAAC,CACrB,CACF,CAAC,CAAE,CAACK,KAAK,CAACc,MAAM,CAAEZ,aAAa,CAAEP,IAAI,CAAC,CAAC,CAEvC,GAAM,CAAAoB,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1Bb,aAAa,CAACP,IAAI,CAAC,CACrB,CAAC,CAED,mBACEN,KAAA,CAAAF,SAAA,EAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd/B,IAAA,QAAA+B,QAAA,cACE/B,IAAA,CAACR,QAAQ,EAACkB,IAAI,CAAEA,IAAK,CAACK,KAAK,CAAEA,KAAM,CAAE,CAAC,CACnC,CAAC,cACNf,IAAA,CAACP,WAAW,EAACsB,KAAK,CAAEA,KAAM,CAACe,aAAa,CAAEA,aAAc,CAAE,CAAC,cAC3D9B,IAAA,CAACT,IAAI,EAACyC,EAAE,CAAC,GAAG,CAAAD,QAAA,CAAC,cAAY,CAAM,CAAC,EAChC,CAAC,CAEP,CAAC,CAED,cAAe,CAAA1B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}